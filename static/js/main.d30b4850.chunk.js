(this["webpackJsonpmusic-player-react"]=this["webpackJsonpmusic-player-react"]||[]).push([[0],{152:function(e,t,a){e.exports=a(186)},186:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(17),l=a.n(i),o=a(15),c=a(226),u=a(229),s=a(230),m=a(231),d=a(134),g=a(124),p=a.n(g),b=a(72),f=a.n(b),v=Object(c.a)((function(e){return{title:{marginLeft:e.spacing(1)},avatar:{height:25,objectFit:"contain"},info:{display:"flex",position:"absolute",right:40}}}));var h=function(){var e=Object(u.a)((function(e){return e.breakpoints.up("md")})),t=v();return r.a.createElement(s.a,{color:"primary",position:"fixed"},r.a.createElement(m.a,null,r.a.createElement(p.a,null),r.a.createElement(d.a,{className:t.title,variant:"h6",component:"h1"},"Music Player"),r.a.createElement("div",{className:t.info},e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{variant:"body1",color:"inherit"},"Developed and designed by argon \xa0"),r.a.createElement("a",{href:"https://github.com/argon17"},r.a.createElement("img",{src:f.a,className:t.avatar,alt:"argon"}))))))},y=a(66),E=a.n(y),O=a(16),S=a(30),j=a(96),x=a(256),N=a(232),w=a(233),C=a(254),I=a(234),k=a(235),q=a(236),P=a(237),_=a(238),T=a(76),F=a.n(T),A=a(61),G=a.n(A),Q=a(36),R=a(23);function $(){var e=Object(Q.a)(["\n    mutation addSong($title: String!, $artist: String!, $thumbnail: String!, $duration: Float!, $url: String!) {\n        insert_songs(objects: {title: $title, artist: $artist, thumbnail: $thumbnail, duration: $duration, url: $url}) {\n            affected_rows\n        }\n    }\n"]);return $=function(){return e},e}function D(){var e=Object(Q.a)(["\n    mutation addOrRemoveFromQueue($input: SongInput!){\n        addOrRemoveFromQueue(input: $input) @client\n    }\n"]);return D=function(){return e},e}var M=Object(R.gql)(D()),U=Object(R.gql)($()),L=Object(c.a)((function(e){return{container:{display:"flex",alignItems:"center"},urlInput:{margin:e.spacing(1)},addSongButton:{margin:e.spacing(1)},dialog:{textAlign:"center"},thumbnail:{width:"90%"}}})),B={artist:"",duration:0,thumbnail:"",title:"",url:""};var J=function(){var e=Object(R.useMutation)(U),t=Object(o.a)(e,2),a=t[0],n=t[1].error,i=L(),l=r.a.useState(!1),c=Object(o.a)(l,2),u=c[0],s=c[1],m=r.a.useState(!1),d=Object(o.a)(m,2),g=d[0],p=d[1],b=r.a.useState(""),f=Object(o.a)(b,2),v=f[0],h=f[1],y=r.a.useState(B),T=Object(o.a)(y,2),A=T[0],Q=T[1];function $(){s(!1)}function D(){return(D=Object(j.a)(E.a.mark((function e(t){var a,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.player,(n=a.player.player).getVideoData&&(r=M(n)),Q(Object(S.a)({},r,{url:v}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){var t=e.getDuration(),a=e.getVideoData(),n=a.title,r=a.video_id;return{artist:a.author,duration:t,thumbnail:"http://img.youtube.com/vi/".concat(r,"/0.jpg"),title:n}}function J(){return(J=Object(j.a)(E.a.mark((function e(){var t,n,r,i,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=A.artist,n=A.duration,r=A.thumbnail,i=A.title,l=A.url,e.prev=1,e.next=4,a({variables:{artist:t.length>0?t:null,duration:n>0?n:null,thumbnail:r.length>0?r:null,title:i.length>0?i:null,url:l.length>0?l:null}});case 4:$(),Q(B),h(""),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(JSON.stringify(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function W(e){var t=e.target,a=t.name,n=t.value;Q((function(e){return Object(S.a)({},e,Object(O.a)({},a,n))}))}function Y(e){var t,a;return null===n||void 0===n?void 0:null===(t=n.networkError)||void 0===t?void 0:null===(a=t.extensions)||void 0===a?void 0:a.path.includes(e)}r.a.useEffect((function(){var e=G.a.canPlay(v);p(e)}),[v]);var z=A.thumbnail,V=A.title,H=A.artist;return r.a.createElement("div",{className:i.container},r.a.createElement(x.a,{className:i.dialog,onClose:$,PaperProps:{style:{background:"linear-gradient(to right, #0f2027, #203a43, #2c5364)",boxShadow:"none"}},open:u},r.a.createElement(N.a,null,"Edit Song"),r.a.createElement(w.a,null,r.a.createElement("img",{alt:"Song Thumbnail",className:i.thumbnail,src:z}),r.a.createElement(C.a,{error:Y("title"),fullWidth:!0,helperText:Y("title")&&"Invalid Input",label:"Title",margin:"dense",name:"title",onChange:W,value:V}),r.a.createElement(C.a,{error:Y("artist"),fullWidth:!0,helperText:Y("artist")&&"Invalid Input",label:"Artist",margin:"dense",name:"artist",onChange:W,value:H}),r.a.createElement(C.a,{error:Y("thumbnail"),fullWidth:!0,helperText:Y("thumbnail")&&"Invalid Input",margin:"dense",label:"Thumbnail",name:"thumbnail",onChange:W,value:z})),r.a.createElement(I.a,null,r.a.createElement(k.a,{color:"secondary",onClick:$},"Cancel"),r.a.createElement(k.a,{color:"white",onClick:function(){return J.apply(this,arguments)},variant:"outlined"},"Add Song"))),r.a.createElement(C.a,{className:i.urlInput,fullWidth:!0,InputProps:{startAdornment:r.a.createElement(q.a,{position:"start"},r.a.createElement(P.a,null))},margin:"normal",onChange:function(e){return h(e.target.value)},placeholder:"Add YouTube URL",type:"url",value:v}),r.a.createElement(k.a,{className:i.addSongButton,color:"primary",disabled:!g,endIcon:r.a.createElement(_.a,null),onClick:function(){return s(!0)},variant:"contained"},"Add"),r.a.createElement(F.a,{url:v,hidden:!0,onReady:function(e){return D.apply(this,arguments)}}))},W=a(239),Y=a(240),z=a(241),V=a(242),H=a(243),K=a(244),X=a(245),Z=a(246),ee=a(49);function te(){var e=Object(Q.a)(["\n    subscription getSongs {\n        songs(order_by: {created_at: desc}) {\n            artist\n            duration\n            id\n            thumbnail\n            title\n            url\n        }\n    }\n"]);return te=function(){return e},e}var ae=Object(ee.a)(te()),ne=Object(n.createContext)({song:{id:"d9443a71-16ab-4a7e-aff7-1a226ddeb47b",title:"Pariah",artist:"Steven Wilson, Ninet Tayeb",thumbnail:"https://img.youtube.com/vi/cNTaFArEObU/0.jpg",url:"https://youtu.be/cNTaFArEObU",duration:279},isPlaying:!1});var re=function(e,t){switch(t.type){case"PAUSE_SONG":return Object(S.a)({},e,{isPlaying:!1});case"PLAY_SONG":return Object(S.a)({},e,{isPlaying:!0});case"SET_SONG":return Object(S.a)({},e,{song:t.payload.song});default:return e}};var ie=Object(c.a)((function(e){return{container:{margin:e.spacing(1),background:"linear-gradient(to right, rgba(72, 85, 99, 0.5), rgba(41, 50, 60, 0.5))"},songInfoContainer:{alignItems:"center",display:"flex",justifyContent:"center"},songInfo:{display:"flex",justifyContent:"space-between",width:"100%"},thumbnail:{height:140,objectFit:"cover",width:140}}}));function le(e){var t=e.song,a=t.id,i=ie(),l=Object(n.useContext)(ne),c=l.state,u=l.dispatch,s=t.artist,m=t.thumbnail,g=t.title,p=Object(n.useState)(!1),b=Object(o.a)(p,2),f=b[0],v=b[1],h=Object(R.useMutation)(M,{onCompleted:function(e){localStorage.setItem("queue",JSON.stringify(e.addOrRemoveFromQueue))}}),y=Object(o.a)(h,1)[0];return Object(n.useEffect)((function(){var e=c.isPlaying&&a===c.song.id;v(e)}),[a,c.song.id,c.isPlaying]),r.a.createElement(W.a,{className:i.container},r.a.createElement("div",{className:i.songInfoContainer},r.a.createElement(Y.a,{className:i.thumbnail,image:m}),r.a.createElement("div",{className:i.songInfo},r.a.createElement(z.a,null,r.a.createElement(d.a,{gutterBottom:!0,variant:"h5",component:"h2"},g),r.a.createElement(d.a,{gutterBottom:!0,variant:"body1",component:"p",color:"textSecondary"},s)),r.a.createElement(V.a,null,r.a.createElement(H.a,{onClick:function(){u({type:"SET_SONG",payload:{song:t}}),u(f?{type:c.isPlaying?"PAUSE_SONG":"PLAY_SONG"}:{type:"PLAY_SONG"})},size:"medium",color:"secondary"},f?r.a.createElement(K.a,null):r.a.createElement(X.a,null)),r.a.createElement(H.a,{onClick:function(){y({variables:{input:Object(S.a)({},t,{__typename:"Song"})}})},size:"medium",color:"secondary"},r.a.createElement(Z.a,null))))))}var oe=function(){var e=Object(R.useSubscription)(ae),t=e.data,a=e.loading,n=e.error;return a?r.a.createElement("div",{style:{alignItems:"center",display:"flex",flexDirection:"column"}},"Loading songs..."):n?r.a.createElement("div",null,"error occured in fetching songs"):r.a.createElement("div",{className:"noob",style:{display:"flex",flexDirection:"column"}},t.songs.map((function(e){return r.a.createElement(le,{key:e.id,song:e})})))},ce=a(257),ue=a(247);var se=Object(c.a)({avatar:{height:44,width:44},container:{alignItems:"center",display:"grid",gridAutoFlow:"column",gridGap:12,gridTemplateColumns:"50px auto 50px",marginTop:10},songInfoContainer:{overflow:"hidden",whiteSpace:"nowrap"},text:{overflow:"hidden",textOverflow:"ellipsis"}});function me(e){var t=e.song,a=se(),n=t.artist,i=t.thumbnail,l=t.title,c=Object(R.useMutation)(M,{onCompleted:function(e){localStorage.setItem("queue",JSON.stringify(e.addOrRemoveFromQueue))}}),u=Object(o.a)(c,1)[0];return r.a.createElement("div",{className:a.container},r.a.createElement(ce.a,{className:a.avatar,src:i,alt:"Song thumbnail"}),r.a.createElement("div",{className:a.songInfoContainer},r.a.createElement(d.a,{variant:"subtitle2",className:a.text},l),r.a.createElement(d.a,{color:"textSecondary",variant:"body2",className:a.text},n)),r.a.createElement(H.a,{onClick:function(){u({variables:{input:Object(S.a)({},t,{__typename:"Song"})}})}},r.a.createElement(ue.a,{color:"error"})))}var de=function(e){var t=e.queue;return Object(u.a)((function(e){return e.breakpoints.up("md")}))&&r.a.createElement("div",{style:{margin:"10px 0"}},r.a.createElement(d.a,{color:"textSecondary",variant:"button"},"QUEUE(",t.length,")"),t.map((function(e,t){return r.a.createElement(me,{key:t,song:e})})))},ge=a(258),pe=a(248),be=a(249);function fe(){var e=Object(Q.a)(["\n    query getQueuedSongs{\n        queue @client {\n            id\n            duration\n            title\n            artist\n            thumbnail\n            url\n        }\n    }\n"]);return fe=function(){return e},e}var ve=Object(ee.a)(fe()),he=Object(c.a)((function(e){return{container:{display:"flex",justifyContent:"space-between",background:"linear-gradient(to right, rgba(72, 85, 99, 0.5), rgba(41, 50, 60, 0.5))"},content:{flex:"1 0 auto"},controls:{alignItems:"center",display:"flex",paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},timestamps:{display:"flex",justifyContent:"space-between"},details:{display:"flex",flexDirection:"column",padding:"0px 15px"},playIcon:{height:38,width:38},thumbnail:{width:150}}}));var ye=function(){var e=Object(n.useContext)(ne),t=e.state,a=e.dispatch,i=Object(R.useQuery)(ve).data,l=he(),c=Object(n.useState)(0),u=Object(o.a)(c,2),s=u[0],m=u[1],g=Object(n.useState)(!1),p=Object(o.a)(g,2),b=p[0],f=p[1],v=Object(n.useRef)(),h=Object(n.useState)(0),y=Object(o.a)(h,2),E=y[0],O=y[1],S=Object(n.useState)(0),j=Object(o.a)(S,2),x=j[0],N=j[1];function w(e){return new Date(1e3*e).toISOString().substr(11,8)}return Object(n.useEffect)((function(){var e=i.queue.findIndex((function(e){return e.id===t.song.id}));N(e)}),[t.song.id,i.queue]),Object(n.useEffect)((function(){var e=i.queue[x+1];1===s&&e&&(m(0),a({type:"SET_SONG",payload:{song:e}}))}),[i.queue,s,a,x]),r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{className:l.container,variant:"outlined"},r.a.createElement("div",{className:l.details},r.a.createElement(z.a,{className:l.content},r.a.createElement(d.a,{variant:"h5",component:"h3"},t.song.title),r.a.createElement(d.a,{variant:"subtitle1",component:"p",color:"textSecondary"},t.song.artist)),r.a.createElement("div",{className:l.controls},r.a.createElement(H.a,{onClick:function(){var e=i.queue[x-1];e&&a({type:"SET_SONG",payload:{song:e}})}},r.a.createElement(pe.a,null)),r.a.createElement(H.a,{onClick:function(){a({type:t.isPlaying?"PAUSE_SONG":"PLAY_SONG"})}},t.isPlaying?r.a.createElement(K.a,{className:l.playIcon}):r.a.createElement(X.a,{className:l.playIcon})),r.a.createElement(H.a,{onClick:function(){var e=i.queue[x+1];s&&e&&a({type:"SET_SONG",payload:{song:e}})}},r.a.createElement(be.a,null))),r.a.createElement("div",{className:l.timestamps},r.a.createElement(d.a,{variant:"subtitle1",component:"p",color:"textSecondary"},w(E)),r.a.createElement(d.a,{variant:"subtitle1",component:"p",color:"textSecondary"},w(t.song.duration))),r.a.createElement(ge.a,{max:1,min:0,onChange:function(e,t){m(t)},onMouseDown:function(){f(!0)},onMouseUp:function(){f(!1),v.current.seekTo(s)},step:.01,type:"range",value:s,color:"secondary"})),r.a.createElement(F.a,{hidden:!0,url:t.song.url,onProgress:function(e){var t=e.played,a=e.playedSeconds;b||(m(t),O(a))},playing:t.isPlaying,ref:v}),r.a.createElement(Y.a,{className:l.thumbnail,image:t.song.thumbnail})),r.a.createElement(de,{queue:i.queue}))},Ee=a(250),Oe=Object(c.a)({avatar:{height:25,objectFit:"contain"},toolbar:{display:"flex",alignItems:"center",justifyContent:"center"}}),Se=function(){var e=Oe();return r.a.createElement(s.a,{position:"static",color:"primary"},r.a.createElement(Ee.a,null,r.a.createElement(m.a,{className:e.toolbar},r.a.createElement(d.a,{variant:"body1",color:"inherit"},"Developed and designed by argon \xa0"),r.a.createElement("a",{href:"https://github.com/argon17",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:f.a,className:e.avatar,alt:"argon"})))))},je=a(251);var xe=function(){var e=Object(u.a)((function(e){return e.breakpoints.up("md")})),t=r.a.useContext(ne),a=r.a.useReducer(re,t),n=Object(o.a)(a,2),i=n[0],l=n[1];return e?r.a.createElement(ne.Provider,{value:{state:i,dispatch:l}},r.a.createElement(h,null),r.a.createElement(je.a,{container:!0,spacing:3,style:{paddingTop:80}},r.a.createElement(je.a,{item:!0,xs:12,md:7},r.a.createElement(J,null),r.a.createElement(oe,null)),r.a.createElement(je.a,{item:!0,xs:12,md:5,style:{position:"fixed",right:0,top:70,width:"100%"}},r.a.createElement(ye,null)))):r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.Provider,{value:{state:i,dispatch:l}},r.a.createElement(h,null),r.a.createElement(je.a,{container:!0,spacing:3,style:{paddingTop:80}},r.a.createElement(je.a,{item:!0,xs:12},r.a.createElement(ye,null)),r.a.createElement(je.a,{item:!0,xs:12,style:{top:170,width:"100%"}},r.a.createElement(J,null),r.a.createElement(oe,null))),r.a.createElement(Se,null)))},Ne=a(252),we=a(253),Ce=a(131),Ie=Object(Ce.a)({overrides:{MuiCssBaseline:{"@global":{body:{background:"linear-gradient(to right, #0f2027, #203a43, #2c5364)",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed"}}}},palette:{type:"dark",primary:{main:"#2C5364"},secondary:{main:"#ffffff"}},typography:{fontFamily:"Ubuntu"}}),ke=a(29),qe=a(129);function Pe(){var e=Object(Q.a)(["\n\n  type Song{\n    id: uuid!\n    title: String!\n    artist: String!\n    thumbnail: String!\n    duration: Float!\n    url: String!\n  }\n\n  input SongInput{\n    id: uuid!\n    title: String!\n    artist: String!\n    thumbnail: String!\n    duration: Float!\n    url: String!\n  }\n  type Query{\n    queue: [Song]!\n  }\n\n  type Mutation{\n    addOrRemoveFromQueue(input: SongInput!): [Song]!\n  }\n\n"]);return Pe=function(){return e},e}var _e=Object(R.gql)(Pe()),Te=new R.ApolloClient({link:new qe.a({uri:"wss://react-music-player-argon.herokuapp.com/v1/graphql",options:{reconnect:!0}}),cache:new R.InMemoryCache,typeDefs:_e,resolvers:{Mutation:{addOrRemoveFromQueue:function(e,t,a){var n=t.input,r=a.cache,i=r.readQuery({query:ve});if(i){var l=i.queue,o=l.some((function(e){return e.id===n.id}))?l.filter((function(e){return e.id!==n.id})):[].concat(Object(ke.a)(l),[n]);return r.writeQuery({query:ve,data:{queue:o}}),o}return[]}}}}),Fe=localStorage.getItem("queue"),Ae=Boolean(Fe);Te.writeQuery({query:ve,data:{queue:Ae?JSON.parse(Fe):[]}});var Ge=Te,Qe=a(185);l.a.render(r.a.createElement(Qe.a,{client:Ge},r.a.createElement(Ne.a,{theme:Ie},r.a.createElement(we.a,null),r.a.createElement(xe,null))),document.getElementById("root"))},72:function(e,t,a){e.exports=a.p+"static/media/identity.3f5fb37f.png"}},[[152,1,2]]]);
//# sourceMappingURL=main.d30b4850.chunk.js.map