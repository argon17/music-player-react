(this["webpackJsonpmusic-player-react"]=this["webpackJsonpmusic-player-react"]||[]).push([[0],{152:function(e,t,a){e.exports=a(186)},186:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(17),l=a.n(i),o=a(15),c=a(226),u=a(229),s=a(230),m=a(231),d=a(134),g=a(124),p=a.n(g),b=a(72),f=a.n(b),v=Object(c.a)((function(e){return{title:{marginLeft:e.spacing(1)},avatar:{height:25,objectFit:"contain"},info:{display:"flex",position:"absolute",right:40}}}));var y=function(){var e=Object(u.a)((function(e){return e.breakpoints.up("md")})),t=v();return r.a.createElement(s.a,{color:"primary",position:"fixed"},r.a.createElement(m.a,null,r.a.createElement(p.a,null),r.a.createElement(d.a,{className:t.title,variant:"h6",component:"h1"},"Music Player"),r.a.createElement("div",{className:t.info},e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{variant:"body1",color:"inherit"},"Developed and Designed by argon \xa0"),r.a.createElement("img",{src:f.a,className:t.avatar,alt:"argon"})))))},E=a(66),h=a.n(E),O=a(16),S=a(30),j=a(96),x=a(257),N=a(232),w=a(233),C=a(255),I=a(234),k=a(235),q=a(236),P=a(237),T=a(238),_=a(76),F=a.n(_),A=a(61),D=a.n(A),G=a(36),Q=a(23);function R(){var e=Object(G.a)(["\n    mutation addSong($title: String!, $artist: String!, $thumbnail: String!, $duration: Float!, $url: String!) {\n        insert_songs(objects: {title: $title, artist: $artist, thumbnail: $thumbnail, duration: $duration, url: $url}) {\n            affected_rows\n        }\n    }\n"]);return R=function(){return e},e}function $(){var e=Object(G.a)(["\n    mutation addOrRemoveFromQueue($input: SongInput!){\n        addOrRemoveFromQueue(input: $input) @client\n    }\n"]);return $=function(){return e},e}var M=Object(Q.gql)($()),U=Object(Q.gql)(R()),B=Object(c.a)((function(e){return{container:{display:"flex",alignItems:"center"},urlInput:{margin:e.spacing(1)},addSongButton:{margin:e.spacing(1)},dialog:{textAlign:"center"},thumbnail:{width:"90%"}}})),L={artist:"",duration:0,thumbnail:"",title:"",url:""};var J=function(){var e=Object(Q.useMutation)(U),t=Object(o.a)(e,2),a=t[0],n=t[1].error,i=B(),l=r.a.useState(!1),c=Object(o.a)(l,2),u=c[0],s=c[1],m=r.a.useState(!1),d=Object(o.a)(m,2),g=d[0],p=d[1],b=r.a.useState(""),f=Object(o.a)(b,2),v=f[0],y=f[1],E=r.a.useState(L),_=Object(o.a)(E,2),A=_[0],G=_[1];function R(){s(!1)}function $(){return($=Object(j.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.player,(n=a.player.player).getVideoData&&(r=M(n)),G(Object(S.a)({},r,{url:v}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){var t=e.getDuration(),a=e.getVideoData(),n=a.title,r=a.video_id;return{artist:a.author,duration:t,thumbnail:"http://img.youtube.com/vi/".concat(r,"/0.jpg"),title:n}}function J(){return(J=Object(j.a)(h.a.mark((function e(){var t,n,r,i,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=A.artist,n=A.duration,r=A.thumbnail,i=A.title,l=A.url,e.prev=1,e.next=4,a({variables:{artist:t.length>0?t:null,duration:n>0?n:null,thumbnail:r.length>0?r:null,title:i.length>0?i:null,url:l.length>0?l:null}});case 4:R(),G(L),y(""),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(JSON.stringify(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function W(e){var t=e.target,a=t.name,n=t.value;G((function(e){return Object(S.a)({},e,Object(O.a)({},a,n))}))}function Y(e){var t,a;return null===n||void 0===n?void 0:null===(t=n.networkError)||void 0===t?void 0:null===(a=t.extensions)||void 0===a?void 0:a.path.includes(e)}r.a.useEffect((function(){var e=D.a.canPlay(v);p(e)}),[v]);var z=A.thumbnail,V=A.title,H=A.artist;return r.a.createElement("div",{className:i.container},r.a.createElement(x.a,{className:i.dialog,onClose:R,PaperProps:{style:{background:"linear-gradient(to right, #0f2027, #203a43, #2c5364)",boxShadow:"none"}},open:u},r.a.createElement(N.a,null,"Edit Song"),r.a.createElement(w.a,null,r.a.createElement("img",{alt:"Song Thumbnail",className:i.thumbnail,src:z}),r.a.createElement(C.a,{error:Y("title"),fullWidth:!0,helperText:Y("title")&&"Invalid Input",label:"Title",margin:"dense",name:"title",onChange:W,value:V}),r.a.createElement(C.a,{error:Y("artist"),fullWidth:!0,helperText:Y("artist")&&"Invalid Input",label:"Artist",margin:"dense",name:"artist",onChange:W,value:H}),r.a.createElement(C.a,{error:Y("thumbnail"),fullWidth:!0,helperText:Y("thumbnail")&&"Invalid Input",margin:"dense",label:"Thumbnail",name:"thumbnail",onChange:W,value:z})),r.a.createElement(I.a,null,r.a.createElement(k.a,{color:"secondary",onClick:R},"Cancel"),r.a.createElement(k.a,{color:"white",onClick:function(){return J.apply(this,arguments)},variant:"outlined"},"Add Song"))),r.a.createElement(C.a,{className:i.urlInput,fullWidth:!0,InputProps:{startAdornment:r.a.createElement(q.a,{position:"start"},r.a.createElement(P.a,null))},margin:"normal",onChange:function(e){return y(e.target.value)},placeholder:"Add YouTube URL",type:"url",value:v}),r.a.createElement(k.a,{className:i.addSongButton,color:"primary",disabled:!g,endIcon:r.a.createElement(T.a,null),onClick:function(){return s(!0)},variant:"contained"},"Add"),r.a.createElement(F.a,{url:v,hidden:!0,onReady:function(e){return $.apply(this,arguments)}}))},W=a(239),Y=a(240),z=a(241),V=a(242),H=a(243),K=a(244),X=a(245),Z=a(246),ee=a(247),te=a(49);function ae(){var e=Object(G.a)(["\n    subscription getSongs {\n        songs(order_by: {created_at: desc}) {\n            artist\n            duration\n            id\n            thumbnail\n            title\n            url\n        }\n    }\n"]);return ae=function(){return e},e}var ne=Object(te.a)(ae()),re=Object(n.createContext)({song:{id:"d9443a71-16ab-4a7e-aff7-1a226ddeb47b",title:"Pariah",artist:"Steven Wilson, Ninet Tayeb",thumbnail:"http://img.youtube.com/vi/cNTaFArEObU/0.jpg",url:"https://youtu.be/cNTaFArEObU",duration:279},isPlaying:!1});var ie=function(e,t){switch(t.type){case"PAUSE_SONG":return Object(S.a)({},e,{isPlaying:!1});case"PLAY_SONG":return Object(S.a)({},e,{isPlaying:!0});case"SET_SONG":return Object(S.a)({},e,{song:t.payload.song});default:return e}};var le=Object(c.a)((function(e){return{container:{margin:e.spacing(1),background:"linear-gradient(to right, rgba(72, 85, 99, 0.5), rgba(41, 50, 60, 0.5))"},songInfoContainer:{alignItems:"center",display:"flex",justifyContent:"center"},songInfo:{display:"flex",justifyContent:"space-between",width:"100%"},thumbnail:{height:140,objectFit:"cover",width:140}}}));function oe(e){var t=e.song,a=t.id,i=le(),l=Object(n.useContext)(re),c=l.state,u=l.dispatch,s=t.artist,m=t.thumbnail,g=t.title,p=Object(n.useState)(!1),b=Object(o.a)(p,2),f=b[0],v=b[1],y=Object(Q.useMutation)(M,{onCompleted:function(e){localStorage.setItem("queue",JSON.stringify(e.addOrRemoveFromQueue))}}),E=Object(o.a)(y,1)[0];return Object(n.useEffect)((function(){var e=c.isPlaying&&a===c.song.id;v(e)}),[a,c.song.id,c.isPlaying]),r.a.createElement(Y.a,{className:i.container},r.a.createElement("div",{className:i.songInfoContainer},r.a.createElement(z.a,{className:i.thumbnail,image:m}),r.a.createElement("div",{className:i.songInfo},r.a.createElement(V.a,null,r.a.createElement(d.a,{gutterBottom:!0,variant:"h5",component:"h2"},g),r.a.createElement(d.a,{gutterBottom:!0,variant:"body1",component:"p",color:"textSecondary"},s)),r.a.createElement(H.a,null,r.a.createElement(K.a,{onClick:function(){u({type:"SET_SONG",payload:{song:t}}),u(f?{type:c.isPlaying?"PAUSE_SONG":"PLAY_SONG"}:{type:"PLAY_SONG"})},size:"large",color:"secondary"},f?r.a.createElement(X.a,null):r.a.createElement(Z.a,null)),r.a.createElement(K.a,{onClick:function(){E({variables:{input:Object(S.a)({},t,{__typename:"Song"})}})},size:"large",color:"secondary"},r.a.createElement(ee.a,null))))))}var ce=function(){var e=Object(Q.useSubscription)(ne),t=e.data,a=e.loading,n=e.error;return a?r.a.createElement("div",{style:{alignItems:"center",display:"flex",flexDirection:"column",marginTop:50}},r.a.createElement(W.a,null)):n?r.a.createElement("div",null,"error occured in fetching songs"):r.a.createElement("div",{className:"noob",style:{display:"flex",flexDirection:"column"}},t.songs.map((function(e){return r.a.createElement(oe,{key:e.id,song:e})})))},ue=a(258),se=a(248);var me=Object(c.a)({avatar:{height:44,width:44},container:{alignItems:"center",display:"grid",gridAutoFlow:"column",gridGap:12,gridTemplateColumns:"50px auto 50px",marginTop:10},songInfoContainer:{overflow:"hidden",whiteSpace:"nowrap"},text:{overflow:"hidden",textOverflow:"ellipsis"}});function de(e){var t=e.song,a=me(),n=t.artist,i=t.thumbnail,l=t.title,c=Object(Q.useMutation)(M,{onCompleted:function(e){localStorage.setItem("queue",JSON.stringify(e.addOrRemoveFromQueue))}}),u=Object(o.a)(c,1)[0];return r.a.createElement("div",{className:a.container},r.a.createElement(ue.a,{className:a.avatar,src:i,alt:"Song thumbnail"}),r.a.createElement("div",{className:a.songInfoContainer},r.a.createElement(d.a,{variant:"subtitle2",className:a.text},l),r.a.createElement(d.a,{color:"textSecondary",variant:"body2",className:a.text},n)),r.a.createElement(K.a,{onClick:function(){u({variables:{input:Object(S.a)({},t,{__typename:"Song"})}})}},r.a.createElement(se.a,{color:"error"})))}var ge=function(e){var t=e.queue;return Object(u.a)((function(e){return e.breakpoints.up("md")}))&&r.a.createElement("div",{style:{margin:"10px 0"}},r.a.createElement(d.a,{color:"textSecondary",variant:"button"},"QUEUE(",t.length,")"),t.map((function(e,t){return r.a.createElement(de,{key:t,song:e})})))},pe=a(259),be=a(249),fe=a(250);function ve(){var e=Object(G.a)(["\n    query getQueuedSongs{\n        queue @client {\n            id\n            duration\n            title\n            artist\n            thumbnail\n            url\n        }\n    }\n"]);return ve=function(){return e},e}var ye=Object(te.a)(ve()),Ee=Object(c.a)((function(e){return{container:{display:"flex",justifyContent:"space-between",background:"linear-gradient(to right, rgba(72, 85, 99, 0.5), rgba(41, 50, 60, 0.5))"},content:{flex:"1 0 auto"},controls:{alignItems:"center",display:"flex",paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},timestamps:{display:"flex",justifyContent:"space-between"},details:{display:"flex",flexDirection:"column",padding:"0px 15px"},playIcon:{height:38,width:38},thumbnail:{width:150}}}));var he=function(){var e=Object(n.useContext)(re),t=e.state,a=e.dispatch,i=Object(Q.useQuery)(ye).data,l=Ee(),c=Object(n.useState)(0),u=Object(o.a)(c,2),s=u[0],m=u[1],g=Object(n.useState)(!1),p=Object(o.a)(g,2),b=p[0],f=p[1],v=Object(n.useRef)(),y=Object(n.useState)(0),E=Object(o.a)(y,2),h=E[0],O=E[1],S=Object(n.useState)(0),j=Object(o.a)(S,2),x=j[0],N=j[1];function w(e){return new Date(1e3*e).toISOString().substr(11,8)}return Object(n.useEffect)((function(){var e=i.queue.findIndex((function(e){return e.id===t.song.id}));N(e)}),[t.song.id,i.queue]),Object(n.useEffect)((function(){var e=i.queue[x+1];1===s&&e&&(m(0),a({type:"SET_SONG",payload:{song:e}}))}),[i.queue,s,a,x]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{className:l.container,variant:"outlined"},r.a.createElement("div",{className:l.details},r.a.createElement(V.a,{className:l.content},r.a.createElement(d.a,{variant:"h5",component:"h3"},t.song.title),r.a.createElement(d.a,{variant:"subtitle1",component:"p",color:"textSecondary"},t.song.artist)),r.a.createElement("div",{className:l.controls},r.a.createElement(K.a,{onClick:function(){var e=i.queue[x-1];e&&a({type:"SET_SONG",payload:{song:e}})}},r.a.createElement(be.a,null)),r.a.createElement(K.a,{onClick:function(){a({type:t.isPlaying?"PAUSE_SONG":"PLAY_SONG"})}},t.isPlaying?r.a.createElement(X.a,{className:l.playIcon}):r.a.createElement(Z.a,{className:l.playIcon})),r.a.createElement(K.a,{onClick:function(){var e=i.queue[x+1];s&&e&&a({type:"SET_SONG",payload:{song:e}})}},r.a.createElement(fe.a,null))),r.a.createElement("div",{className:l.timestamps},r.a.createElement(d.a,{variant:"subtitle1",component:"p",color:"textSecondary"},w(h)),r.a.createElement(d.a,{variant:"subtitle1",component:"p",color:"textSecondary"},w(t.song.duration))),r.a.createElement(pe.a,{max:1,min:0,onChange:function(e,t){m(t)},onMouseDown:function(){f(!0)},onMouseUp:function(){f(!1),v.current.seekTo(s)},step:.01,type:"range",value:s,color:"secondary"})),r.a.createElement(F.a,{hidden:!0,url:t.song.url,onProgress:function(e){var t=e.played,a=e.playedSeconds;b||(m(t),O(a))},playing:t.isPlaying,ref:v}),r.a.createElement(z.a,{className:l.thumbnail,image:t.song.thumbnail})),r.a.createElement(ge,{queue:i.queue}))},Oe=a(251),Se=Object(c.a)({avatar:{height:25,objectFit:"contain"},toolbar:{display:"flex",alignItems:"center",justifyContent:"center"}}),je=function(){var e=Se();return r.a.createElement(s.a,{position:"static",color:"primary"},r.a.createElement(Oe.a,null,r.a.createElement(m.a,{className:e.toolbar},r.a.createElement(d.a,{variant:"body1",color:"inherit"},"Developed and Designed by argon \xa0"),r.a.createElement("img",{src:f.a,className:e.avatar,alt:"argon"}))))},xe=a(252);var Ne=function(){var e=Object(u.a)((function(e){return e.breakpoints.up("md")})),t=r.a.useContext(re),a=r.a.useReducer(ie,t),n=Object(o.a)(a,2),i=n[0],l=n[1];return e?r.a.createElement(re.Provider,{value:{state:i,dispatch:l}},r.a.createElement(y,null),r.a.createElement(xe.a,{container:!0,spacing:3,style:{paddingTop:80}},r.a.createElement(xe.a,{item:!0,xs:12,md:7},r.a.createElement(J,null),r.a.createElement(ce,null)),r.a.createElement(xe.a,{item:!0,xs:12,md:5,style:{position:"fixed",right:0,top:70,width:"100%"}},r.a.createElement(he,null)))):r.a.createElement(r.a.Fragment,null,r.a.createElement(re.Provider,{value:{state:i,dispatch:l}},r.a.createElement(y,null),r.a.createElement(xe.a,{container:!0,spacing:3,style:{paddingTop:80}},r.a.createElement(xe.a,{item:!0,xs:12},r.a.createElement(he,null)),r.a.createElement(xe.a,{item:!0,xs:12,style:{top:170,width:"100%"}},r.a.createElement(J,null),r.a.createElement(ce,null))),r.a.createElement(je,null)))},we=a(253),Ce=a(254),Ie=a(131),ke=Object(Ie.a)({overrides:{MuiCssBaseline:{"@global":{body:{background:"linear-gradient(to right, #0f2027, #203a43, #2c5364)",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed"}}}},palette:{type:"dark",primary:{main:"#2C5364"},secondary:{main:"#ffffff"}},typography:{fontFamily:"Ubuntu"}}),qe=a(29),Pe=a(129);function Te(){var e=Object(G.a)(["\n\n  type Song{\n    id: uuid!\n    title: String!\n    artist: String!\n    thumbnail: String!\n    duration: Float!\n    url: String!\n  }\n\n  input SongInput{\n    id: uuid!\n    title: String!\n    artist: String!\n    thumbnail: String!\n    duration: Float!\n    url: String!\n  }\n  type Query{\n    queue: [Song]!\n  }\n\n  type Mutation{\n    addOrRemoveFromQueue(input: SongInput!): [Song]!\n  }\n\n"]);return Te=function(){return e},e}var _e=Object(Q.gql)(Te()),Fe=new Q.ApolloClient({link:new Pe.a({uri:"wss://react-music-player-argon.herokuapp.com/v1/graphql",options:{reconnect:!0}}),cache:new Q.InMemoryCache,typeDefs:_e,resolvers:{Mutation:{addOrRemoveFromQueue:function(e,t,a){var n=t.input,r=a.cache,i=r.readQuery({query:ye});if(i){var l=i.queue,o=l.some((function(e){return e.id===n.id}))?l.filter((function(e){return e.id!==n.id})):[].concat(Object(qe.a)(l),[n]);return r.writeQuery({query:ye,data:{queue:o}}),o}return[]}}}}),Ae=localStorage.getItem("queue"),De=Boolean(Ae);Fe.writeQuery({query:ye,data:{queue:De?JSON.parse(Ae):[]}});var Ge=Fe,Qe=a(185);l.a.render(r.a.createElement(Qe.a,{client:Ge},r.a.createElement(we.a,{theme:ke},r.a.createElement(Ce.a,null),r.a.createElement(Ne,null))),document.getElementById("root"))},72:function(e,t,a){e.exports=a.p+"static/media/identity.3f5fb37f.png"}},[[152,1,2]]]);
//# sourceMappingURL=main.dc19c224.chunk.js.map